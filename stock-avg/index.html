<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <script src="script.js" defer></script>
  <title>ë¬¼íƒ€ê¸° ê³„ì‚°ê¸°</title>
  <style>
    body {
      margin: 0;
      font-family: 'Pretendard', sans-serif;
      display: flex;
      background: #fff;
    }
    aside {
      width: 200px;
      background: #f5f5f5;
      border-right: 1px solid #ccc;
      padding: 20px;
    }
    .category-btn {
      width: 100%;
      padding: 12px;
      margin-bottom: 10px;
      border: none;
      font-size: 14px;
      border-radius: 6px;
      background-color: #f0f0f0;
      color: #333;
      font-weight: 600;
      text-align: left;
      cursor: pointer;
    }
    .category-btn.active {
      background-color: #4CAF50;
      color: white;
    }
    main {
      flex: 1;
      padding: 30px;
      max-width: 600px;
      margin: auto;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin: 5px 0 15px;
      border: 2px solid #4CAF50;
      border-radius: 6px;
      font-size: 16px;
    }
    button.submit {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 15px;
      width: 100%;
      font-weight: bold;
      border-radius: 6px;
      font-size: 16px;
    }
    .result {
      margin-top: 20px;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background: #f9f9f9;
    }
    .error {
      color: red;
      font-weight: bold;
      margin-top: 10px;
       }
    @media screen and (max-width: 768px) {
      body {
        flex-direction: column;
      }
      aside {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid #ccc;
      }
      main {
        padding: 20px;
      }
      input, select, button.submit {
        font-size: 14px;
        padding: 10px;
      }
  </style>
</head>
<body>

<aside>
  <h2 style="font-size:16px; color:#4CAF50; margin-bottom: 20px;">ë¬¼íƒ€ê¸° ê³„ì‚°ê¸°</h2>
  <button class="category-btn" onclick="showTab('stock-avg')">ğŸ“Š ì‚¬íŒ”ì‚¬íŒ” & ë¬¼íƒ€ê¸° ê³„ì‚°ê¸°</button>
  <button onclick="setCategory('stock')" id="btn-stock" class="category-btn active">ğŸª™ ì£¼ì‹/í•´ì™¸ì£¼ì‹</button>
  <button onclick="setCategory('coin')" id="btn-coin" class="category-btn">ğŸ’° ì½”ì¸</button>
  <button onclick="setCategory('stockfut')" id="btn-stockfut" class="category-btn">âœ¨ ì£¼ì‹ì„ ë¬¼</button>
  <button onclick="setCategory('coinfut')" id="btn-coinfut" class="category-btn">ğŸŒ ì½”ì¸ì„ ë¬¼</button>
</aside>

<main id="stock-section">
  <h2 style="text-align:center; color:#4CAF50;">ğŸ“Š ë¬¼íƒ€ê¸° ê³„ì‚°ê¸°(ì£¼ì‹)</h2>

  <label style="font-weight:bold; color:#b71c1c;">ğŸ“Œ ì¢…ëª©ëª…</label>
  <input id="stockName" type="text" placeholder="ì˜ˆ: ì‚¼ì„±ì „ì">

  <label style="font-weight:bold;">ğŸ“Š í˜„ì¬ ë³´ìœ  ìˆ˜ëŸ‰</label>
  <input id="stockQuantity" type="number" placeholder="ì˜ˆ: 1">

  <label style="font-weight:bold;">ğŸ“ˆ í˜„ì¬ í‰ë‹¨ê°€ (â‚©)</label>
  <input id="stockAvgPrice" type="number" placeholder="ì˜ˆ: 70000">

  <label style="font-weight:bold;">ğŸ’µ í˜„ì¬ ì£¼ê°€ (â‚©)</label>
  <input id="stockCurrentPrice" type="number" placeholder="ì˜ˆ: 70000">

  <label style="font-weight:bold;">ğŸ’¸ ê±°ë˜ ìˆ˜ìˆ˜ë£Œìœ¨ (%)</label>
  <input id="stockFeeRate" type="number" placeholder="ì˜ˆ: 0.04" value="0.04">
  <h3 style="color:#3f51b5; font-size:16px; margin-top:20px;">â• ì¶”ê°€ ë§¤ìˆ˜ ë°©ì‹</h3>
  <div style="display: flex; gap: 10px;">
    <select id="stockAddOption">
      <option value="amount">ê¸ˆì•¡ (â‚©)</option>
      <option value="shares">ìˆ˜ëŸ‰ (ì£¼)</option>
    </select>
    <input id="stockAddInput" type="number" placeholder="ì˜ˆ: 50000">
  </div>

  <button class="submit" onclick="calculateStock()">ë¬¼íƒ€ê¸° ê³„ì‚°í•˜ê¸°</button>

  <div class="result" id="stockResult"></div>
  <div class="error" id="stockError"></div>
<div style="margin-top: 20px; font-size: 14px; color: #666; line-height: 1.6; background: #f8f8f8; padding: 10px 15px; border-radius: 6px;">
    âš ï¸ <strong>ì£¼ì˜ì‚¬í•­</strong><br>
    - ì´ ê³„ì‚°ê¸°ëŠ” ì°¸ê³ ìš©ì´ë©° ì‹¤ì œ ì£¼ì‹ ê±°ë˜ ì¡°ê±´(ìˆ˜ìˆ˜ë£Œ, ì²´ê²°ì§€ì—° ë“±)ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
    - ì…ë ¥í•œ ìˆ˜ìˆ˜ë£Œìœ¨ì´ ì‹¤ì œì™€ ë‹¤ë¥´ë©´ ì†ìµ ê³„ì‚°ì´ ì™œê³¡ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
    - ë³¸ ê³„ì‚°ê¸°ì˜ ì‚¬ìš©ì€ ì‚¬ìš©ì ë³¸ì¸ì˜ íŒë‹¨ì´ë©°, íˆ¬ì ì†ì‹¤ ì‹œ ë²•ì  ì±…ì„ì„ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
    - ë³¸ ê³„ì‚°ê¸°ì˜ ê²°ê³¼ëŠ” ì°¸ê³ ìš©ì´ë©°, íˆ¬ì íŒë‹¨ì€ ì‚¬ìš©ì ë³¸ì¸ì˜ ì±…ì„ì…ë‹ˆë‹¤.
  </div>
</main>

<main id="coin-section" style="display:none">
  <h2 style="text-align:center; color:#4CAF50;">ğŸ’° ì½”ì¸ ë¬¼íƒ€ê¸° ê³„ì‚°ê¸°</h2>
  
  <label style="font-weight:bold;">ğŸ“Œ ì½”ì¸ëª…</label>
  <input id="coinName" placeholder="ì½”ì¸ëª…">
  <label style="font-weight:bold;">ğŸ“Š ë³´ìœ  ìˆ˜ëŸ‰</label>
  <input id="coinQuantity" type="number" placeholder="ë³´ìœ  ìˆ˜ëŸ‰">
  <label style="font-weight:bold;">ğŸ“ˆ í˜„ì¬ í‰ë‹¨ê°€ (â‚©)</label>
  <input id="coinAvgPrice" type="number" placeholder="ì˜ˆ: 43000000">

  <label style="font-weight:bold;">ğŸ’µ í˜„ì¬ ê°€ê²© (â‚©)</label>
  <input id="coinPrice" type="number" placeholder="í˜„ì¬ ê°€ê²© (â‚©)">
  <label style="font-weight:bold;">ğŸ’¸ ê±°ë˜ ìˆ˜ìˆ˜ë£Œìœ¨ (%)</label>
  <input id="coinFeeRate" type="number" placeholder="ì˜ˆ: 0.04" value="0.04">
  <label style="font-weight:bold;">â• ì¶”ê°€ ë§¤ìˆ˜ ë°©ì‹</label>
  <div style="display: flex; gap: 10px;">
    <select id="coinAddOption">
      <option value="amount">ê¸ˆì•¡ (â‚©)</option>
      <option value="shares">ìˆ˜ëŸ‰ (ì½”ì¸)</option>
    </select>
    <input id="coinAddInput" type="number" placeholder="ì˜ˆ: 100000">
  </div>
  <button class="submit" onclick="calculateCoin()">ë¬¼íƒ€ê¸° ê³„ì‚°í•˜ê¸°</button>
  <div class="result" id="coinResult"></div>
  <div class="error" id="coinError"></div>
  <div style="margin-top: 20px; font-size: 14px; color: #666; line-height: 1.6; background: #f8f8f8; padding: 10px 15px; border-radius: 6px;">
    âš ï¸ <strong>ì£¼ì˜ì‚¬í•­</strong><br>
    - ì´ ê³„ì‚°ê¸°ëŠ” ì°¸ê³ ìš©ì´ë©° ì‹¤ì œ ê±°ë˜ì†Œ í™˜ê²½(ìŠ¬ë¦¬í”¼ì§€, ë ˆë²„ë¦¬ì§€, ê°•ì œ ì²­ì‚° ì¡°ê±´ ë“±)ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
    - ì…ë ¥í•œ ìˆ˜ìˆ˜ë£Œìœ¨ì´ ì •í™•í•˜ì§€ ì•Šìœ¼ë©´ ì†ìµ ê³„ì‚°ì´ ì™œê³¡ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ í™•ì¸ í›„ ì…ë ¥í•˜ì„¸ìš”.<br>
    - ë³¸ ê³„ì‚°ê¸°ì˜ ì‚¬ìš©ì€ ì‚¬ìš©ì ë³¸ì¸ì˜ ì±…ì„ì´ë©°, íˆ¬ì ì†ì‹¤ ì‹œ ë²•ì  ì±…ì„ì„ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
    - ë³¸ ê³„ì‚°ê¸°ì˜ ê²°ê³¼ëŠ” ì°¸ê³ ìš©ì´ë©°, íˆ¬ì íŒë‹¨ì€ ì‚¬ìš©ì ë³¸ì¸ì˜ ì±…ì„ì…ë‹ˆë‹¤.
  </div>
</main>

<main id="stockfut-section" style="display:none">
  <h2 style="text-align:center; color:#4CAF50;">ğŸ§­ ì£¼ì‹ì„ ë¬¼ ë¬¼íƒ€ê¸° ê³„ì‚°ê¸°</h2>
  <label style="font-weight:bold;">ğŸ“Œ ì¢…ëª©ëª…</label>
  <input id="stockfutName" placeholder="ì¢…ëª©ëª…">
  <label style="font-weight:bold;">ğŸ“Š ë³´ìœ  ê³„ì•½ ìˆ˜</label>
  <input id="stockfutQuantity" type="number" placeholder="ë³´ìœ  ê³„ì•½ ìˆ˜">
  <div style="display: flex; gap: 20px; align-items: flex-end; margin-bottom: 15px;">
  <div style="flex: 1;">
    <label style="font-weight:bold;">ğŸ’µ í˜„ì¬ ê°€ê²©</label>
    <input id="stockfutPrice" type="number" placeholder="í˜„ì¬ ê°€ê²©">
  </div>
  <div style="flex: 1;">
    <label style="font-weight:bold;">ğŸ’µ ì§„ì… ê°€ê²©</label>
    <input id="stockfutEntryPrice" type="number" placeholder="ì§„ì… ê°€ê²©">
  </div>
</div>
  <div style="display: flex; gap: 20px; align-items: flex-end; margin-bottom: 15px;">
  <div style="flex: 1;">
    <label style="font-weight:bold;">ğŸ“ ë ˆë²„ë¦¬ì§€ ë°°ìœ¨</label>
    <input id="stockfutLeverage" type="number" placeholder="ë ˆë²„ë¦¬ì§€ ë°°ìœ¨">
  </div>
  <div style="flex: 1;">
    <label style="font-weight:bold;">ğŸ’° ë‚´ ì˜ˆìˆ˜ê¸ˆ</label>
    <input id="stockfutBalance" type="number" placeholder="ë‚´ ì˜ˆìˆ˜ê¸ˆ">
  </div>
</div>
  <div style="display:flex; gap: 10px; align-items: center;">
  <div style="flex:1">
    <label style="font-weight:bold;">ğŸ“ˆ í¬ì§€ì…˜ ì„ íƒ</label>
    <select id="stockfutPosition">
      <option value="long">ë¡±</option>
      <option value="short">ìˆ</option>
    </select>
  </div>
  <div style="flex:1">
    <label style="font-weight:bold;">ğŸ’¸ ê±°ë˜ ìˆ˜ìˆ˜ë£Œìœ¨ (%)</label>
    <input id="stockfutFeeRate" type="number" placeholder="ì˜ˆ: 0.04" value="0.04">
  </div>
</div>
  <label style="font-weight:bold;">â• ì¶”ê°€ ë§¤ìˆ˜ ë°©ì‹</label>
<div style="display: flex; gap: 10px;">
  <select id="stockfutAddOption" style="flex: 1;">
    <option value="amount">ê¸ˆì•¡</option>
    <option value="shares">ê³„ì•½ ìˆ˜</option>
  </select>
  <input id="stockfutAddInput" type="number" placeholder="ì˜ˆ: 50000" style="flex: 1;">
</div>
  <button class="submit" onclick="calculateStockFut()">ë¬¼íƒ€ê¸° ê³„ì‚°í•˜ê¸°</button>
  <div class="result" id="stockfutResult"></div>
  <div class="error" id="stockfutError"></div>
  <div style="margin-top: 20px; font-size: 14px; color: #666; line-height: 1.6; background: #f8f8f8; padding: 10px 15px; border-radius: 6px;">
    âš ï¸ <strong>ì£¼ì˜ì‚¬í•­</strong><br>
    - ì´ ê³„ì‚°ê¸°ëŠ” ì°¸ê³ ìš©ìœ¼ë¡œ, ì‹¤ì œ ì„ ë¬¼ ê±°ë˜ì†Œì˜ ì²­ì‚° ì¡°ê±´, ë§ˆì§„ ìœ ì§€ìœ¨, ìˆ˜ìˆ˜ë£Œ ì •ì±…ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
    - ìˆ˜ìˆ˜ë£Œìœ¨ì„ ì¡°ì •í•˜ì—¬ ë” í˜„ì‹¤ì ì¸ ì†ìµ ì˜ˆì¸¡ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.<br>
    - ë³¸ ê³„ì‚°ê¸°ì˜ ê²°ê³¼ëŠ” ë²•ì  íš¨ë ¥ì´ ì—†ìœ¼ë©°, íˆ¬ì ì†ì‹¤ì— ëŒ€í•œ ì±…ì„ì„ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
    - ë³¸ ê³„ì‚°ê¸°ì˜ ê²°ê³¼ëŠ” ì°¸ê³ ìš©ì´ë©°, íˆ¬ì íŒë‹¨ì€ ì‚¬ìš©ì ë³¸ì¸ì˜ ì±…ì„ì…ë‹ˆë‹¤.
  </div>
</main>

<main id="coinfut-section" style="display:none">
  <h2 style="text-align:center; color:#4CAF50;">ğŸŒ ì½”ì¸ì„ ë¬¼ ë¬¼íƒ€ê¸° ê³„ì‚°ê¸°</h2>
  <label style="font-weight:bold;">ğŸ“Œ ì½”ì¸ëª…</label>
  <input id="coinfutName" placeholder="ì½”ì¸ëª…">
  <label style="font-weight:bold;">ğŸ“Š ë³´ìœ  ê³„ì•½ ìˆ˜</label>
  <input id="coinfutQuantity" type="number" placeholder="ë³´ìœ  ê³„ì•½ ìˆ˜">
  <div style="display: flex; gap: 20px; align-items: flex-end; margin-bottom: 15px;">
  <div style="flex: 1;">
    <label style="font-weight:bold;">ğŸ’µ í˜„ì¬ ê°€ê²©</label>
    <input id="coinfutPrice" type="number" placeholder="í˜„ì¬ ê°€ê²©">
  </div>
  <div style="flex: 1;">
    <label style="font-weight:bold;">ğŸ’µ ì§„ì… ê°€ê²©</label>
    <input id="coinfutEntryPrice" type="number" placeholder="ì§„ì… ê°€ê²©">
  </div>
</div>
  <div style="display: flex; gap: 10px; align-items: flex-end; margin-bottom: 15px;">
  <div style="flex: 1;">
    <label style="font-weight:bold;">ğŸ“ ë ˆë²„ë¦¬ì§€ ë°°ìœ¨</label>
    <input id="coinfutLeverage" type="number" placeholder="ë ˆë²„ë¦¬ì§€ ë°°ìœ¨">
  </div>
  <div style="flex: 1;">
    <label style="font-weight:bold;">ğŸ’° ë‚´ ì˜ˆìˆ˜ê¸ˆ</label>
    <input id="coinfutBalance" type="number" placeholder="ë‚´ ì˜ˆìˆ˜ê¸ˆ">
  </div>
</div>
  <div style="display:flex; gap: 10px; align-items: center;">
  <div style="flex:1">
    <label style="font-weight:bold;">ğŸ“ˆ í¬ì§€ì…˜ ì„ íƒ</label>
    <select id="coinfutPosition">
      <option value="long">ë¡±</option>
      <option value="short">ìˆ</option>
    </select>
  </div>
  <div style="flex:1">
    <label style="font-weight:bold;">ğŸ’¸ ê±°ë˜ ìˆ˜ìˆ˜ë£Œìœ¨ (%)</label>
    <input id="coinfutFeeRate" type="number" placeholder="ì˜ˆ: 0.04" value="0.04">
  </div>
</div>
  <label style="font-weight:bold;">â• ì¶”ê°€ ë§¤ìˆ˜ ë°©ì‹</label>
<div style="display: flex; gap: 10px;">
  <select id="coinfutAddOption" style="flex: 1;">
    <option value="amount">ê¸ˆì•¡</option>
    <option value="shares">ê³„ì•½ ìˆ˜</option>
  </select>
  <input id="coinfutAddInput" type="number" placeholder="ì˜ˆ: 100000" style="flex: 1;">
</div>
  <button class="submit" onclick="calculateCoinFut()">ë¬¼íƒ€ê¸° ê³„ì‚°í•˜ê¸°</button>
  <div class="result" id="coinfutResult"></div>
  <div class="error" id="coinfutError"></div>
  <div style="margin-top: 20px; font-size: 14px; color: #666; line-height: 1.6; background: #f8f8f8; padding: 10px 15px; border-radius: 6px;">
    âš ï¸ <strong>ì£¼ì˜ì‚¬í•­</strong><br>
    - ì´ ê³„ì‚°ê¸°ëŠ” ì°¸ê³ ìš©ìœ¼ë¡œ, ì‹¤ì œ ê±°ë˜ì†Œì˜ ë ˆë²„ë¦¬ì§€ ì •ì±…, ì²­ì‚° ë¡œì§ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
    - ìŠ¬ë¦¬í”¼ì§€, ì²­ì‚° ìš°ì„ ìˆœìœ„, ê±°ë˜ì†Œ ìˆ˜ìˆ˜ë£Œë¥¼ ê°ì•ˆí•˜ì—¬ ìˆ˜ìˆ˜ë£Œìœ¨ì„ ì¡°ì •í•´ ì£¼ì„¸ìš”.<br>
    - ë³¸ ê³„ì‚°ê¸°ì˜ ì‚¬ìš© ê²°ê³¼ëŠ” íˆ¬ì ê¶Œìœ ê°€ ì•„ë‹ˆë©°, íˆ¬ì ì†ì‹¤ ì‹œ ë²•ì  ì±…ì„ì„ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
    - ë³¸ ê³„ì‚°ê¸°ì˜ ê²°ê³¼ëŠ” ì°¸ê³ ìš©ì´ë©°, íˆ¬ì íŒë‹¨ì€ ì‚¬ìš©ì ë³¸ì¸ì˜ ì±…ì„ì…ë‹ˆë‹¤.
  </div>
</main>

  <div id="stock-avg-tab" style="display: none;">
  <div id="sapal-container"></div>
  <div id="multagi-container"></div>
</div>


<script>
function calculateCoin() {
  const name = document.getElementById("coinName").value.trim();
  const quantity = parseFloat(document.getElementById("coinQuantity").value);
  const price = parseFloat(document.getElementById("coinPrice").value);
  const addOption = document.getElementById("coinAddOption").value;
  const addInput = parseFloat(document.getElementById("coinAddInput").value);
  const result = document.getElementById("coinResult");
  const error = document.getElementById("coinError");

  if (!name || isNaN(quantity) || isNaN(price) || isNaN(addInput) || isNaN(document.getElementById("coinAvgPrice").value)) {
    error.innerText = "ì…ë ¥ê°’ì„ ëª¨ë‘ í™•ì¸í•´ì£¼ì„¸ìš”.";
    result.innerHTML = "";
    return;
  }
  error.innerText = "";

  let addQty = 0;
  let addTotal = 0;
  if (addOption === "amount") {
    addQty = addInput / price;
    addTotal = addInput;
  } else {
    addQty = addInput;
    addTotal = price * addQty;
  }

  const totalQty = quantity + addQty;
  const avgPrice = parseFloat(document.getElementById("coinAvgPrice").value);
  const totalInvest = (quantity * avgPrice) + addTotal;
  const currentVal = totalQty * price;
  const feeRate = parseFloat(document.getElementById("coinFeeRate").value) / 100;
  const fees = totalQty * price * feeRate;
  const profit = currentVal - totalInvest - fees;
  const profitRate = (profit / totalInvest) * 100;

  result.innerHTML = `
    <table style="width:100%; border-collapse: collapse;">
      <thead>
        <tr style="background-color:#f0f0f0;">
          <th>ì½”ì¸ëª…</th>
          <th>í‰ê°€ì†ìµ</th>
          <th>ìˆ˜ìµë¥ </th>
          <th>ë³´ìœ ìˆ˜ëŸ‰</th>
          <th>í‰ê°€ê¸ˆì•¡</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>${name}</td>
          <td style="color:${profit >= 0 ? 'red' : 'blue'}">â‚©${profit.toFixed(2).toLocaleString()}</td>
          <td style="color:${profitRate >= 0 ? 'red' : 'blue'}">${profitRate.toFixed(2)}%</td>
          <td>${totalQty.toFixed(4)} ì½”ì¸</td>
          <td>â‚©${currentVal.toLocaleString()}</td>
        </tr>
      </tbody>
    </table>
    <p style="margin-top: 10px; font-weight: bold;">ì´ ë§¤ì…ê¸ˆì•¡: â‚©${totalInvest.toLocaleString()}</p>
    <p style="margin-top: 5px;">â• ì¶”ê°€ ë§¤ìˆ˜ ë‹¨ê°€: â‚©${price.toLocaleString()}</p>
    <p style="margin-top: 5px;">ğŸ“ˆ ë¬¼íƒ€ê¸° í›„ í‰ë‹¨ê°€: â‚©${(totalInvest / totalQty).toLocaleString()}</p>`;
}
function setCategory(category) {
  const sections = ['stock', 'coin', 'stockfut', 'coinfut'];
  sections.forEach(cat => {
    const section = document.getElementById(`${cat}-section`);
    const button = document.getElementById(`btn-${cat}`);
    if (section) section.style.display = 'none';
    if (button) button.classList.remove('active');
  });
  const activeSection = document.getElementById(`${category}-section`);
  const activeButton = document.getElementById(`btn-${category}`);
  if (activeSection) activeSection.style.display = 'block';
  if (activeButton) activeButton.classList.add('active');
}
function calculateStock() {
  const name = document.getElementById("stockName").value.trim();
  const quantity = parseFloat(document.getElementById("stockQuantity").value);
  const currentPrice = parseFloat(document.getElementById("stockCurrentPrice").value);
  const avgPrice = parseFloat(document.getElementById("stockAvgPrice").value);
  const feeRate = parseFloat(document.getElementById("stockFeeRate").value) / 100;
  const addOption = document.getElementById("stockAddOption").value;
  const addInput = parseFloat(document.getElementById("stockAddInput").value);
  const result = document.getElementById("stockResult");
  const error = document.getElementById("stockError");

  if (!name || isNaN(quantity) || isNaN(currentPrice) || isNaN(avgPrice) || isNaN(addInput)) {
    error.innerText = "ì…ë ¥ê°’ì„ ëª¨ë‘ í™•ì¸í•´ì£¼ì„¸ìš”.";
    result.innerHTML = "";
    return;
  }
  error.innerText = "";

  let addQty = 0;
  let addTotal = 0;
  if (addOption === "amount") {
    addQty = addInput / currentPrice;
    addTotal = addInput;
  } else {
    addQty = addInput;
    addTotal = currentPrice * addQty;
  }

  const totalQty = quantity + addQty;
  const totalInvest = (quantity * avgPrice) + addTotal;
  const currentVal = totalQty * currentPrice;
  const fees = totalQty * currentPrice * feeRate;
  const profit = currentVal - totalInvest - fees;
  const profitRate = (profit / totalInvest) * 100;

  result.innerHTML = `
    <table style="width:100%; border-collapse: collapse;">
      <thead>
        <tr style="background-color:#f0f0f0;">
          <th>ì¢…ëª©ëª…</th>
          <th>í‰ê°€ì†ìµ</th>
          <th>ìˆ˜ìµë¥ </th>
          <th>ë³´ìœ ìˆ˜ëŸ‰</th>
          <th>í‰ê°€ê¸ˆì•¡</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>${name}</td>
          <td style="color:${profit >= 0 ? 'red' : 'blue'}">â‚©${profit.toFixed(2).toLocaleString()}</td>
          <td style="color:${profitRate >= 0 ? 'red' : 'blue'}">${profitRate.toFixed(2)}%</td>
          <td>${totalQty.toFixed(2)}ì£¼</td>
          <td>â‚©${currentVal.toLocaleString()}</td>
        </tr>
      </tbody>
    </table>
    <p style="margin-top: 10px; font-weight: bold;">ì´ ë§¤ì…ê¸ˆì•¡: â‚©${totalInvest.toLocaleString()}</p>
    <p style="margin-top: 5px;">â• ì¶”ê°€ ë§¤ìˆ˜ ë‹¨ê°€: â‚©${currentPrice.toLocaleString()}</p>
    <p style="margin-top: 5px;">ğŸ“ˆ ë¬¼íƒ€ê¸° í›„ í‰ë‹¨ê°€: â‚©${(totalInvest / totalQty).toLocaleString()}</p>`;
}

function calculateStockFut() {
  const name = document.getElementById("stockfutName").value.trim();
  const quantity = parseFloat(document.getElementById("stockfutQuantity").value);
  const price = parseFloat(document.getElementById("stockfutPrice").value);
  const entryPrice = parseFloat(document.getElementById("stockfutEntryPrice").value);
  const leverage = parseFloat(document.getElementById("stockfutLeverage").value);
  const balance = parseFloat(document.getElementById("stockfutBalance").value);
  const position = document.getElementById("stockfutPosition").value;
  const feeRate = parseFloat(document.getElementById("stockfutFeeRate").value) / 100;
  const addOption = document.getElementById("stockfutAddOption").value;
  const addInput = parseFloat(document.getElementById("stockfutAddInput").value);
  const result = document.getElementById("stockfutResult");
  const error = document.getElementById("stockfutError");

  if (!name || isNaN(quantity) || isNaN(price) || isNaN(entryPrice) || isNaN(leverage) || isNaN(balance) || isNaN(addInput)) {
    error.innerText = "ì…ë ¥ê°’ì„ ëª¨ë‘ í™•ì¸í•´ì£¼ì„¸ìš”.";
    result.innerHTML = "";
    return;
  }
  error.innerText = "";

  let addQty = 0;
  let addTotal = 0;
  if (addOption === "amount") {
    addQty = addInput / price;
    addTotal = addInput;
  } else {
    addQty = addInput;
    addTotal = price * addQty;
  }

  const totalQty = quantity + addQty;
  const totalInvest = (quantity * entryPrice) + addTotal;
  const currentVal = totalQty * price;
  const fees = totalQty * price * feeRate;
  const profit = currentVal - totalInvest - fees;
  const profitRate = (profit / totalInvest) * 100;

  result.innerHTML = `
    <table style="width:100%; border-collapse: collapse;">
      <thead>
        <tr style="background-color:#f0f0f0;">
          <th>ì¢…ëª©ëª…</th>
          <th>í‰ê°€ì†ìµ</th>
          <th>ìˆ˜ìµë¥ </th>
          <th>ë³´ìœ ê³„ì•½</th>
          <th>í‰ê°€ê¸ˆì•¡</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>${name}</td>
          <td style="color:${profit >= 0 ? 'red' : 'blue'}">â‚©${profit.toFixed(2).toLocaleString()}</td>
          <td style="color:${profitRate >= 0 ? 'red' : 'blue'}">${profitRate.toFixed(2)}%</td>
          <td>${totalQty.toFixed(2)} ê³„ì•½</td>
          <td>â‚©${currentVal.toLocaleString()}</td>
        </tr>
      </tbody>
    </table>
    <p style="margin-top: 10px; font-weight: bold;">ì´ ë§¤ì…ê¸ˆì•¡: â‚©${totalInvest.toLocaleString()}</p>
    <p style="margin-top: 5px;">â• ì¶”ê°€ ë§¤ìˆ˜ ë‹¨ê°€: â‚©${price.toLocaleString()}</p>
    <p style="margin-top: 5px;">ğŸ“ˆ ë¬¼íƒ€ê¸° í›„ í‰ë‹¨ê°€: â‚©${(totalInvest / totalQty).toLocaleString()}</p>`;
}

function calculateCoinFut() {
  const name = document.getElementById("coinfutName").value.trim();
  const quantity = parseFloat(document.getElementById("coinfutQuantity").value);
  const price = parseFloat(document.getElementById("coinfutPrice").value);
  const entryPrice = parseFloat(document.getElementById("coinfutEntryPrice").value);
  const leverage = parseFloat(document.getElementById("coinfutLeverage").value);
  const balance = parseFloat(document.getElementById("coinfutBalance").value);
  const position = document.getElementById("coinfutPosition").value;
  const feeRate = parseFloat(document.getElementById("coinfutFeeRate").value) / 100;
  const addOption = document.getElementById("coinfutAddOption").value;
  const addInput = parseFloat(document.getElementById("coinfutAddInput").value);
  const result = document.getElementById("coinfutResult");
  const error = document.getElementById("coinfutError");

  if (!name || isNaN(quantity) || isNaN(price) || isNaN(entryPrice) || isNaN(leverage) || isNaN(balance) || isNaN(addInput)) {
    error.innerText = "ì…ë ¥ê°’ì„ ëª¨ë‘ í™•ì¸í•´ì£¼ì„¸ìš”.";
    result.innerHTML = "";
    return;
  }
  error.innerText = "";

  let addQty = 0;
  let addTotal = 0;
  if (addOption === "amount") {
    addQty = addInput / price;
    addTotal = addInput;
  } else {
    addQty = addInput;
    addTotal = price * addQty;
  }

  const totalQty = quantity + addQty;
  const totalInvest = (quantity * entryPrice) + addTotal;
  const currentVal = totalQty * price;
  const fees = totalQty * price * feeRate;
  const profit = currentVal - totalInvest - fees;
  const profitRate = (profit / totalInvest) * 100;

  result.innerHTML = `
    <table style="width:100%; border-collapse: collapse;">
      <thead>
        <tr style="background-color:#f0f0f0;">
          <th>ì½”ì¸ëª…</th>
          <th>í‰ê°€ì†ìµ</th>
          <th>ìˆ˜ìµë¥ </th>
          <th>ë³´ìœ ê³„ì•½</th>
          <th>í‰ê°€ê¸ˆì•¡</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>${name}</td>
          <td style="color:${profit >= 0 ? 'red' : 'blue'}">â‚©${profit.toFixed(2).toLocaleString()}</td>
          <td style="color:${profitRate >= 0 ? 'red' : 'blue'}">${profitRate.toFixed(2)}%</td>
          <td>${totalQty.toFixed(2)} ê³„ì•½</td>
          <td>â‚©${currentVal.toLocaleString()}</td>
        </tr>
      </tbody>
    </table>
    <p style="margin-top: 10px; font-weight: bold;">ì´ ë§¤ì…ê¸ˆì•¡: â‚©${totalInvest.toLocaleString()}</p>
    <p style="margin-top: 5px;">â• ì¶”ê°€ ë§¤ìˆ˜ ë‹¨ê°€: â‚©${price.toLocaleString()}</p>
    <p style="margin-top: 5px;">ğŸ“ˆ ë¬¼íƒ€ê¸° í›„ í‰ë‹¨ê°€: â‚©${(totalInvest / totalQty).toLocaleString()}</p>`;
}
window.onload = function() {
  setCategory('stock');
};
</script>
</body>
</html>
