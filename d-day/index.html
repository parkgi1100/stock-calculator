<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>D-Day ê³„ì‚°ê¸°</title>
  <script>
    function applyToday() {
      const today = new Date().toISOString().split('T')[0];
      document.getElementById('baseDate').value = today;
      calculateDday();
    }

    function calculateDday() {
      const base = new Date(document.getElementById('baseDate').value);
      const dateOffset = new Date(document.getElementById('targetDate').value);
      const daysOffset = parseInt(document.getElementById('offsetDays').value);
      const weeksOffset = parseInt(document.getElementById('offsetWeeks').value);
      const monthsOffset = parseInt(document.getElementById('offsetMonths').value);

      let target;
      if (!isNaN(dateOffset.getTime())) {
        target = dateOffset;
      } else if (!isNaN(daysOffset)) {
        target = new Date(base);
        target.setDate(base.getDate() + daysOffset);
      } else if (!isNaN(weeksOffset)) {
        target = new Date(base);
        target.setDate(base.getDate() + weeksOffset * 7);
      } else if (!isNaN(monthsOffset)) {
        target = new Date(base);
        target.setMonth(base.getMonth() + monthsOffset);
      } else {
        document.getElementById('result').innerHTML = '';
        return;
      }

      const diff = Math.floor((target - base) / (1000 * 60 * 60 * 24));
      const elapsed = Math.abs(diff);
      const result = diff === 0 ? 'D-DAY' : (diff > 0 ? `D-${diff}` : `D+${Math.abs(diff)}`);

      const baseDay = base.toLocaleDateString('ko-KR', { weekday: 'long' });
      const targetDay = target.toLocaleDateString('ko-KR', { weekday: 'long' });

      const weeks = Math.floor(elapsed / 7);
      const months = Math.floor(elapsed / 30);

      const resultHTML = `
        <div class="flex items-center justify-between text-green-600 text-2xl font-bold mb-4">
          <span>${result}</span>
          <span class="text-sm text-gray-700">ì´ ${elapsed}ì¼ (${diff > 0 ? 'ë‚¨ìŒ' : 'ì§€ë‚¨'})</span>
        </div>
        <div class="grid gap-2 text-sm text-gray-700 text-left">
          <div><strong>ğŸ“… ê¸°ì¤€ì¼ ìš”ì¼:</strong> ${baseDay}</div>
          <div><strong>ğŸ“… ëŒ€ìƒì¼:</strong> ${target.getFullYear()}ë…„ ${target.getMonth() + 1}ì›” ${target.getDate()}ì¼ (${targetDay})</div>
          <div><strong>ğŸ—“ï¸ ì°¨ì´ ì£¼:</strong> ${weeks}ì£¼</div>
          <div><strong>ğŸ—“ï¸ ì°¨ì´ ê°œì›”(ëŒ€ëµ):</strong> ${months}ê°œì›”</div>
        </div>
        <div class="mt-4"><strong>ğŸ‰ ì£¼ìš” ê¸°ë…ì¼:</strong></div>
        <ul class="list-disc list-inside text-sm text-gray-600">
          <li>100ì¼: ${formatAnniversaryDays(base, 100)}</li>
          <li>200ì¼: ${formatAnniversaryDays(base, 200)}</li>
          <li>1ì£¼ë…„: ${formatAnniversaryDays(base, 365)}</li>
          <li>2ì£¼ë…„: ${formatAnniversaryDays(base, 730)}</li>
        </ul>
        <button onclick="copyResult()" class="mt-4 bg-blue-500 text-white px-4 py-2 rounded text-sm">ê²°ê³¼ ë³µì‚¬</button>`;

      document.getElementById('result').innerHTML = resultHTML;
    }
  
    function formatAnniversaryDays(base, days) {
  const anniv = new Date(base);
  anniv.setDate(anniv.getDate() + days);
  const day = anniv.toLocaleDateString('ko-KR', { weekday: 'short' });
  return `${anniv.getFullYear()}ë…„ ${anniv.getMonth() + 1}ì›” ${anniv.getDate()}ì¼ (${day})`;
}

    function copyResult() {
      const text = document.getElementById('result').innerText;
      navigator.clipboard.writeText(text).then(() => {
        alert('ê²°ê³¼ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
      });
    }
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
  <div class="bg-white shadow-lg rounded-xl p-6 w-full max-w-md">
    <h1 class="text-2xl font-bold mb-4 text-center text-green-600">ğŸ“† D-Day ê³„ì‚°ê¸°</h1>
    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700">ê¸°ì¤€ì¼</label>
        <div class="flex gap-2 items-center">
          <input type="date" id="baseDate" class="w-full p-2 border rounded text-center" onchange="calculateDday()" />
          <button onclick="applyToday()" class="bg-green-500 text-white px-3 py-2 rounded text-sm whitespace-nowrap">ì˜¤ëŠ˜</button>
        </div>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">ëŒ€ìƒì¼ (ë‚ ì§œ ì„ íƒ ë˜ëŠ” ì•„ë˜ ì¤‘ íƒì¼)</label>
        <input type="date" id="targetDate" class="w-full p-2 border rounded text-center" onchange="calculateDday()" />
      </div>
      <div class="grid grid-cols-3 gap-2">
        <input type="number" placeholder="ë©°ì¹  ì „/í›„" id="offsetDays" class="p-2 border rounded text-center" oninput="calculateDday()">
        <input type="number" placeholder="ëª‡ ì£¼ ì „/í›„" id="offsetWeeks" class="p-2 border rounded text-center" oninput="calculateDday()">
        <input type="number" placeholder="ëª‡ ë‹¬ ì „/í›„" id="offsetMonths" class="p-2 border rounded text-center" oninput="calculateDday()">
      </div>
      <div id="result" class="mt-6 p-4 bg-gray-50 rounded border text-base"></div>
    </div>
  </div>
    <footer class="mt-8 text-center text-sm text-gray-500">
      <p>âœ”ï¸ ë³¸ ê³„ì‚°ê¸°ëŠ” ë‹¤ì–‘í•œ ì¼ì • ë° ê¸°ë…ì¼ D-Dayë¥¼ ê°„í¸í•˜ê²Œ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤.</p>
      <p>ğŸ“Š í–¥í›„ ì‚¬ìš© í†µê³„ ë° ê¸°ëŠ¥ ê°œì„ ì„ ìœ„í•´ ë°©ë¬¸ì ë¶„ì„ì´ ì§„í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
      <p>ğŸ’¡ ê¸°ëŠ¥ ì œì•ˆ, ì˜¤ë¥˜ ì‹ ê³  ë“± ë¹„ì¦ˆë‹ˆìŠ¤ ê´€ë ¨ ë¬¸ì˜ëŠ” <a href="mailto:contact@calcu.kr" class="text-blue-500 underline">contact@calcu.kr</a>ë¡œ ì—°ë½ì£¼ì„¸ìš”.</p>
    </footer>
  </div>
</body>
</html>
